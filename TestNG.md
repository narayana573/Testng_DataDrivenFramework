# TestNG Annotations and Concepts for Selenium

TestNG is a powerful testing framework for Java, widely used with Selenium for writing and managing test automation scripts. It provides various annotations to control the test execution flow, manage dependencies, group tests, and generate reports.

## TestNG Annotations

TestNG uses annotations to define different stages and configurations within your test classes. Here's a breakdown of the available annotations:

**Setup and Teardown Annotations:**

* **`@BeforeSuite`:** The annotated method runs once before all tests in the current test suite. Useful for global setup tasks.
* **`@AfterSuite`:** The annotated method runs once after all tests in the current test suite have finished. Useful for global cleanup tasks.
* **`@BeforeTest`:** The annotated method runs before any test method belonging to the classes inside the `<test>` tag in your `testng.xml` file. Useful for test-level setup.
* **`@AfterTest`:** The annotated method runs after all the test methods belonging to the classes inside the `<test>` tag in your `testng.xml` file have finished. Useful for test-level cleanup.
* **`@BeforeGroups`:** The annotated method runs before the first test method belonging to any of the specified groups.
    * `value`: An array of group names (e.g., `@BeforeGroups({"smoke", "regression"})`).
* **`@AfterGroups`:** The annotated method runs after the last test method belonging to any of the specified groups has finished.
    * `value`: An array of group names (e.g., `@AfterGroups({"smoke", "regression"})`).
* **`@BeforeClass`:** The annotated method runs once before the first test method in the current test class is invoked. Useful for class-level setup (e.g., initializing WebDriver).
* **`@AfterClass`:** The annotated method runs once after all the test methods in the current test class have been run. Useful for class-level cleanup (e.g., closing WebDriver).
* **`@BeforeMethod`:** The annotated method runs before each test method within the current test class. Useful for setup required before each test (e.g., navigating to a specific page).
* **`@AfterMethod`:** The annotated method runs after each test method within the current test class has finished. Useful for cleanup after each test (e.g., taking screenshots on failure).

**Data Provisioning Annotations:**

* **`@DataProvider`:** Marks a method as a data provider for test methods. This method must return a 2D `Object` array (`Object[][]`), where each inner `Object[]` represents a set of data for one test iteration.
    * `name`: The name of the data provider (defaults to the method name if not specified). The `@Test` method uses this name in its `dataProvider` attribute to consume the data.
    * `parallel`: If `true`, tests generated by this data provider run in parallel (default is `false`).
* **Selenium Relevance:** Used for Data-Driven Testing (DDT), where the same test script is executed multiple times with different sets of data (e.g., testing login functionality with various valid and invalid credentials).

**Factory Annotation:**

* **`@Factory`:** Marks a method as a factory that returns an array of objects that TestNG will use as test classes. This allows for dynamic creation of test classes at runtime.
* **Selenium Relevance:** Useful for scenarios where you need to generate multiple test classes based on external configurations or data.

**Listener Annotation:**

* **`@Listeners`:** Defines custom listeners for a test class. Listeners implement TestNG interfaces (`org.testng.ITestNGListener` or its sub-interfaces) to hook into different events during the test execution lifecycle.
    * `value`: An array of classes that implement a TestNG listener interface.
* **Selenium Relevance:** Used for custom reporting, logging, screenshot capturing on failure, and other custom behaviors during test execution.

**Parameter Annotation:**

* **`@Parameters`:** Specifies how to pass parameters to a `@Test` method from the `testng.xml` file.
    * `value`: An array of parameter names that correspond to the `<parameter>` tags in the `testng.xml` file. The order of parameters in the annotation must match the order in the test method's arguments.
* **Selenium Relevance:** Allows externalizing configuration values (e.g., browser type, URLs) from the test code, making tests more flexible and maintainable across different environments.

**Test Annotation:**

* **`@Test`:** Marks a method as a test method that TestNG will execute.
    * `alwaysRun`: If `true`, the test method will always run, even if its dependent methods have failed.
    * `dataProvider`: The name of the data provider method to use for this test.
    * `dataProviderClass`: The class where the data provider method is located (if it's in a different class). The method must be `static`.
    * `dependsOnGroups`: An array of group names that this test method depends on. This test will only run if at least one test method in each of the specified groups has passed.
    * `dependsOnMethods`: An array of method names that this test method depends on. This test will only run if all the specified methods have passed.
    * `description`: A human-readable description for the test method.
    * `enabled`: If `false`, the test method will be skipped (default is `true`).
    * `expectedExceptions`: An array of exception classes that the test method is expected to throw. If any of these exceptions are thrown, the test will pass; otherwise, it will fail.
    * `groups`: An array of group names that this test method belongs to. Used for categorizing and running specific sets of tests.
    * `invocationCount`: The number of times this test method should be executed.
    * `invocationTimeOut`: The maximum total time (in milliseconds) allowed for all invocations of this test method (ignored if `invocationCount` is not specified).
    * `priority`: The priority of this test method. Tests with lower priority values are executed first (can be negative).
    * `successPercentage`: The minimum percentage of successful invocations required for this test to be considered a pass (used with `invocationCount`).
    * `singleThreaded`: If `true` at the class level, all methods in the class will run in the same thread, even with parallel execution settings. Deprecated name: `sequential`.
    * `timeOut`: The maximum time (in milliseconds) this test method is allowed to execute before being marked as a timeout failure.
    * `threadPoolSize`: The number of threads to use when invoking this method (used with `invocationCount` for parallel execution of the same test method).

**Example Usage:**

```java
import org.testng.annotations.*;

public class MySeleniumTests {

    @BeforeSuite
    public void setupSuite() {
        System.out.println("Setting up the entire test suite");
    }

    @BeforeTest
    public void setupTest() {
        System.out.println("Setting up tests within the <test> tag");
    }

    @BeforeClass
    public void setupClass() {
        System.out.println("Setting up the test class");
        // Initialize WebDriver here
    }

    @BeforeMethod
    public void setupMethod() {
        System.out.println("Setting up before each test method");
        // Navigate to a specific URL
    }

    @Test(priority = 1, description = "Verify login with valid credentials")
    public void testValidLogin() {
        System.out.println("Executing valid login test");
        // Selenium steps for valid login
    }

    @Test(priority = 2, dataProvider = "invalidCredentials", dependsOnMethods = "testValidLogin")
    public void testInvalidLogin(String username, String password) {
        System.out.println("Executing invalid login test with: " + username + ", " + password);
        // Selenium steps for invalid login with provided data
    }

    @DataProvider(name = "invalidCredentials")
    public Object[][] getInvalidCredentials() {
        return new Object[][]{
                {"invalidUser", "wrongPass"},
                {"", "wrongPass"},
                {"invalidUser", ""}
        };
    }

    @AfterMethod
    public void teardownMethod() {
        System.out.println("Tearing down after each test method");
        // Take screenshot on failure
    }

    @AfterClass
    public void teardownClass() {
        System.out.println("Tearing down the test class");
        // Quit WebDriver here
    }

    @AfterTest
    public void teardownTest() {
        System.out.println("Tearing down tests within the <test> tag");
    }

    @AfterSuite
    public void teardownSuite() {
        System.out.println("Tearing down the entire test suite");
    }

    @Test(groups = {"smoke"})
    public void smokeTest() {
        System.out.println("This is a smoke test");
        // Basic functionality check
    }

    @Test(groups = {"regression", "login"})
    public void regressionLoginTest() {
        System.out.println("This is a regression test for login");
        // Comprehensive login test
    }

    @Test(enabled = false)
    public void skippedTest() {
        System.out.println("This test will be skipped");
    }
}
